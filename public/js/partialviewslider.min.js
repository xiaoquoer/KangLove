"use strict";!function(a,l){var e="partialViewSlider",s={width:70,controls:!0,controlsPosition:"inside",backdrop:!0,dots:!1,auto:!0,transitionSpeed:400,delay:4e3,pauseOnHover:!0,keyboard:!0,perspective:!1,prevHtml:'<i class="glyphicon glyphicon-menu-left"></i>',nextHtml:'<i class="glyphicon glyphicon-menu-right"></i>',onLoad:function(){},onSlideEnd:function(){}};function n(i,t){this.element=i,this.options=a.extend({},s,t),this._defaults=s,this._name=e,this.init()}function d(i){var t=a(i.element);i.slides=t.find("li"),i.numElements=i.slides.length,i.numSlides=i.numElements-4,i.wrapperWidth=a(i.wrapper).width(),i.slideWidth=i.wrapperWidth*i.options.width/100,i.sideWidth=i.wrapperWidth*((100-i.options.width)/2)/100,i.slideMovement=i.wrapperWidth*i.options.width/100,i.firstMovement=i.currentPosition=-(i.slideWidth-i.sideWidth+i.slideWidth)}function p(t,i){var e=a(t.element);if("forward"==i)t.index++,t.currentPosition-=t.slideWidth;else if("backward"==i)t.index--,t.currentPosition+=t.slideWidth;else{var s=parseInt(i);s<=t.numSlides&&0<s&&(t.index=s-1,t.currentPosition=t.firstMovement-t.index*t.slideWidth)}a(t.slides[t.index+2]).addClass("active").siblings().removeClass("active"),t.options.dots&&a(t.dots[t.index]).addClass("active").siblings().removeClass("active"),e.css({"-webkit-transform":"translateX("+t.currentPosition+"px)",transform:"translateX("+t.currentPosition+"px)"}),setTimeout(function(){if(t.index>t.numSlides-1){t.index=0,t.currentPosition=t.firstMovement;var i=!0}else if(t.index<0){t.index=t.numSlides-1,t.currentPosition-=t.numSlides*t.slideWidth;i=!0}else i=!1;i&&(a(t.slides).css("transition-duration","0ms"),a(t.slides[t.index+2]).addClass("active").siblings().removeClass("active"),t.options.dots&&a(t.dots[t.index]).addClass("active").siblings().removeClass("active"),e.css({"transition-duration":"0ms","-webkit-transform":"translateX("+t.currentPosition+"px)",transform:"translateX("+t.currentPosition+"px)"}),setTimeout(function(){e.css("transition-duration",t.options.transitionSpeed+"ms"),a(t.slides).css("transition-duration",t.options.transitionSpeed+"ms")},20)),t.options.onSlideEnd.call(t.element)},t.options.transitionSpeed)}var c=null,u=null;function h(i){return i.touches||i.originalEvent.touches}function f(i){c=h(i)[0].clientX,u=h(i)[0].clientY}function v(i){var t=a(i.element);i.index=0,t.width(i.numElements*i.slideWidth),a(i.slides).width(i.slideWidth),t.css({"-webkit-transform":"translateX("+i.firstMovement+"px)",transform:"translateX("+i.firstMovement+"px)"}),a(i.slides[2]).addClass("active").siblings().removeClass("active"),i.options.dots&&a(i.dots[0]).addClass("active").siblings().removeClass("active"),t.siblings(".partialViewSlider-backdrop").css("width",i.sideWidth),setTimeout(function(){t.css("transition-duration",i.options.transitionSpeed+"ms"),a(i.slides).css("transition-duration",i.options.transitionSpeed+"ms")},20)}a.extend(n.prototype,{init:function(){var e,i;(i=a((e=this).element)).wrap('<div class="partialViewSlider-outerwrapper"><div class="partialViewSlider-wrapper"></div></div>'),this.outerWrapper=i.closest(".partialViewSlider-outerwrapper"),this.wrapper=i.closest(".partialViewSlider-wrapper"),"outside"==this.options.controlsPosition?a(this.outerWrapper).addClass("partialViewSlider-outsideControls"):"neighbors"==this.options.controlsPosition&&a(this.outerWrapper).addClass("partialViewSlider-neighborControls");var t,s=i.find("li").slice(0,2),n=i.find("li").slice(-2);if(i.prepend(n.clone().addClass("partialViewSlider-clone")),i.append(s.clone().addClass("partialViewSlider-clone")),d(this),this.options.perspective&&a(this.wrapper).addClass("partialViewSlider-perspective"),this.options.controls&&(a(this.outerWrapper).append('<a href="#" class="partialViewSlider-nav partialViewSlider-prev">'+this.options.prevHtml+"</a>"),a(this.outerWrapper).append('<a href="#" class="partialViewSlider-nav partialViewSlider-next">'+this.options.nextHtml+"</a>"),a(this.outerWrapper).on("click",".partialViewSlider-next",function(i){i.preventDefault(),p(e,"forward")}),a(this.outerWrapper).on("click",".partialViewSlider-prev",function(i){i.preventDefault(),p(e,"backward")})),this.options.backdrop&&(a(this.wrapper).append('<div class="partialViewSlider-backdrop"></div>'),a(this.wrapper).append('<div class="partialViewSlider-backdrop partialViewSlider-right"></div>')),this.options.dots){for(var o='<ul class="partialViewSlider-dots">',r=0;r<this.numSlides;r++)o+='<li><a href="#"></a></li>';o+="</ul>",a(this.outerWrapper).append(o),e.dots=this.dots=a(this.outerWrapper).find(".partialViewSlider-dots li"),a(this.outerWrapper).on("click",".partialViewSlider-dots li",function(i){i.preventDefault();var t=a(e.dots).index(this);p(e,t+1)})}v(this),this.options.auto&&(e.looper=this.looper=setInterval(function(){p(e,"forward")},this.options.delay),this.options.pauseOnHover&&(a(this.wrapper).on("mouseenter",function(){clearInterval(e.looper)}),a(this.wrapper).on("mouseleave",function(){e.looper=this.looper=setInterval(function(){p(e,"forward")},e.options.delay)}))),this.options.keyboard&&a(document).on("keyup",function(i){a(":focus").is("input, textarea")||(37===i.keyCode?p(e,"backward"):39===i.keyCode&&p(e,"forward"))}),a(l).on("resize orientationchange",function(){clearTimeout(t),t=setTimeout(function(){d(e),v(e)},500)}),document.addEventListener("touchstart",f,!1),document.addEventListener("touchmove",function(i){!function(i,t){if(c&&u){var e=h(i)[0].clientX,s=h(i)[0].clientY,n=c-e,o=u-s;Math.abs(n)>Math.abs(o)&&p(t,n<0?"backward":"forward"),u=c=null}}(i,e)},!1),this.options.onLoad.call(i)},prev:function(){p(this,"backward")},next:function(){p(this,"forward")},play:function(){var i=this;clearInterval(this.looper),this.looper=setInterval(function(){p(i,"forward")},i.options.delay)},pause:function(){clearInterval(this.looper)},goToSlide:function(i){p(this,i)}}),a.fn[e]=function(i){var t;return this.each(function(){(t=a.data(this,"plugin_"+e))||(t=new n(this,i),a.data(this,"plugin_"+e,t))}),t}}(jQuery,window,document);